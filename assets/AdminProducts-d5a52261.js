import{_ as m,o as n,c as i,b as t,x as p,y as _,F as g,n as P,t as c,r as f,f as $,d as v}from"./index-6bafa8fa.js";const w={props:["pages","getProducts"],methods:{},mounted(){this.getProducts()}},x={"aria-label":"Page navigation example"},y={class:"pagination"},C=t("span",{"aria-hidden":"true"},"«",-1),M=[C],V=["onClick"],A=t("span",{"aria-hidden":"true"},"»",-1),E=[A];function N(a,s,e,b,h,l){return n(),i("div",null,[t("nav",x,[t("ul",y,[t("li",{class:p(["page-item",{disabled:!e.pages.has_pre}])},[t("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:s[0]||(s[0]=_(()=>e.getProducts(e.pages.current_page-1),["prevent"]))},M)],2),(n(!0),i(g,null,P(e.pages.total_pages,d=>(n(),i("li",{class:p(["page-item",{active:d===e.pages.current_page}]),key:d+"page"},[t("a",{class:"page-link",href:"#",onClick:_(()=>e.getProducts(d),["prevent"])},c(d),9,V)],2))),128)),t("li",{class:p(["page-item",{disabled:!e.pages.has_next}])},[t("a",{class:"page-link",href:"#","aria-label":"Next",onClick:s[1]||(s[1]=_(()=>e.getProducts(e.pages.current_page+1),["prevent"]))},E)],2)])])])}const B=m(w,[["render",N]]),{VITE_APP_URL:r,VITE_APP_PATH:u}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"ufo060204",BASE_URL:"/Vue-Week7-Homework/",MODE:"production",DEV:!1,PROD:!0},T=null,U=null,I={data(){return{products:[],tempProduct:{imagesUrl:[]},isNew:!1,page:{}}},methods:{getProducts(a=1){const s=`${r}api/${u}/admin/products/?page=${a}`;this.$http.get(s).then(e=>{this.products=e.data.products,this.page=e.data.pagination,console.log(e.data.pagination),console.log(this.page)}).catch(e=>{alert(e.data.message)})},openModal(a,s){a==="create"?(this.productModal.show(),this.isNew=!0,this.tempProduct={imagesUrl:[]}):a==="edit"?(this.productModal.show(),this.isNew=!1,this.tempProduct={...s}):a==="delete"&&(this.delProductModal.show(),this.tempProduct={...s})},updateProduct(){let a=`${r}api/${u}/admin/product`,s="post";this.isNew||(a=`${r}api/${u}/admin/product/${this.tempProduct.id}`,s="put"),this.$http[s](a,{data:this.tempProduct}).then(e=>{alert(e.data.message),this.getProducts(),T.hide()}).catch(e=>{alert(e.data.message)})},createImages(){this.tempProduct.imagesUrl=[],this.tempProduct.imagesUrl.push("")},deleteProduct(){const a=`${r}api/${u}/admin/product/${this.tempProduct.id}`;this.$http.delete(a).then(s=>{alert(s.data.message),this.getProducts(),U.hide()}).catch(s=>{alert(s.data.message)})}},components:{BackPagination:B},mounted(){this.getProducts()}},D={class:"container"},L={class:"text-end mt-4"},R={class:"table mt-4"},H=t("thead",null,[t("tr",null,[t("th",{width:"120"},"分類"),t("th",null,"產品名稱"),t("th",{width:"120"},"原價"),t("th",{width:"120"},"售價"),t("th",{width:"100"},"是否啟用"),t("th",{width:"120"},"編輯")])],-1),F={class:"text-end"},O={class:"text-end"},S={key:0,class:"text-success"},z={key:1},W={class:"btn-group"},j=["onClick"],q=["onClick"];function G(a,s,e,b,h,l){const d=f("BackPagination");return n(),i(g,null,[$(" 後台產品列表 "),t("div",D,[t("div",L,[t("button",{class:"btn btn-primary",onClick:s[0]||(s[0]=o=>l.openModal("create"))}," 建立新的產品 ")]),t("table",R,[H,t("tbody",null,[(n(!0),i(g,null,P(h.products,o=>(n(),i("tr",{key:o.id},[t("td",null,c(o.category),1),t("td",null,c(o.title),1),t("td",F,c(o.origin_price),1),t("td",O,c(o.price),1),t("td",null,[o.is_enabled?(n(),i("span",S,"啟用")):(n(),i("span",z,"未啟用"))]),t("td",null,[t("div",W,[t("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:k=>l.openModal("edit",o)}," 編輯 ",8,j),t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:k=>l.openModal("delete",o)}," 刪除 ",8,q)])])]))),128))])]),v(d,{pages:h.page,"get-products":l.getProducts},null,8,["pages","get-products"])])],64)}const K=m(I,[["render",G]]);export{K as default};
