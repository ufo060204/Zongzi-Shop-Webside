import{_ as B,a as w,m as P,c as l,e as p,b as t,g as b,F as g,s as C,i as h,W as v,X as N,t as a,j as d,h as I,r as k,o as i,Y as S}from"./index-86331c0d.js";import{c as m}from"./cart-e30e8792.js";import{S as n}from"./sweetalert2.all-7b583d04.js";const{VITE_APP_URL:x,VITE_APP_PATH:y}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"ufo060204",BASE_URL:"/Zongzi-Shop-Webside/",MODE:"production",DEV:!1,PROD:!0},$={data(){return{products:[],productId:"",loadingItem:"",couponCode:"",isLoading:!1,color:"#FF700C",form:{user:{name:"",mail:"",tel:"",address:""},message:""}}},methods:{...w(m,["getCarts"]),updateCartItem(o){const s={product_id:o.product.id,qty:o.qty};this.loadingItem=o.id,this.$http.put(`${x}/v2/api/${y}/cart/${o.id}`,{data:s}).then(r=>{this.getCarts(),this.loadingItem="",n.fire({icon:"success",title:"已更新數量",showConfirmButton:!1,timer:1500})}).catch(r=>{n.fire(r.data.message)})},checkCoupon(){const o={code:this.couponCode},s=`${x}/v2/api/${y}/coupon`;this.$http.post(s,{data:o}).then(r=>{r.data.success===!0?n.fire({showConfirmButton:!1,icon:"success",title:"套用成功",text:"已套用優惠券 zongzi40",timer:1e3}):r.data.success===!1&&n.fire({icon:"error",title:"套用失敗",text:"找不到優惠券",footer:'<a href="#" class="goGetCoupon">前往領取優惠碼</a>',didOpen:()=>{n.getPopup().querySelector(".goGetCoupon").addEventListener("click",c=>{c.preventDefault(),this.$router.push("/home/-NR8JzTIYKZ08sSYBdjQ"),n.close()})}})}).catch(r=>{n.fire(r.response.data.message)})},...w(m,["deleteCartItem"]),deleteAllCart(){n.fire({title:"刪除確認？",text:"確定要清除購物車的所有商品嗎？",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"是的",cancelButtonText:"取消"}).then(o=>{o.isConfirmed&&this.$http.delete(`${x}/v2/api/${y}/carts`).then(s=>{this.getCarts(),n.fire("刪除成功","購物車的商品已清空","success")}).catch(s=>{n.fire(s.data.message)})})}},computed:{...P(m,["cart","total","final_total"])},mounted(){this.getCarts()}},j=t("section",{class:"landing-img landing-header"},null,-1),A={class:"bg-bg py-7 py-lg-8 h-100"},E={class:"container h-100"},L={key:0,class:"row h-100"},z={class:"col-md-6 offset-md-3 text-center my-auto"},U=t("div",{style:{"background-color":"#F99"},class:"d-flex justify-content-center align-items-center text-white py-2 mb-3"},[t("span",{class:"material-symbols-outlined me-3"}," warning "),t("p",{class:"fs-5"},"您的購物車中沒有商品")],-1),D={key:1},q=I('<ul class="d-md-flex justify-content-center text-center"><li class="bg-white border border-boderlight py-3 px-7">確認商品</li><li class="d-flex align-items-center justify-content-center px-1"><i class="bi bi-chevron-right fs-4 text-text-light shopping-process-icon"></i></li><li class="border border-boderlight py-3 px-7">填寫資料</li><li class="d-flex align-items-center justify-content-center px-1"><i class="bi bi-chevron-right fs-4 text-text-light shopping-process-icon"></i></li><li class="border border-boderlight py-3 px-7">確認付款</li><li class="d-flex align-items-center justify-content-center px-1"><i class="bi bi-chevron-right fs-4 text-text-light shopping-process-icon"></i></li><li class="border border-boderlight py-3 px-7">完成付款</li></ul>',1),F={class:"text-end my-3"},R={class:"text-center container-lg border border-white border-2 mb-3"},G=I('<ul class="bg-text-dark row d-none d-md-flex"><li class="fs-5 fw-bold text-white py-2 col-4 border-end border-white">圖片</li><li class="fs-5 fw-bold text-white py-2 col-2 border-end border-white">品名</li><li class="fs-5 fw-bold text-white py-2 col-2 border-end border-white">單價</li><li class="fs-5 fw-bold text-white py-2 col-1 border-end border-white">數量</li><li class="fs-5 fw-bold text-white py-2 col-2 border-end border-white">小計</li><li class="fs-5 fw-bold text-white py-2 col-1">刪除</li></ul>',1),M={class:"col-md-4 col-6"},O=["src"],Y={class:"col-md-8 col-6"},H={class:"row align-items-center"},W={class:"col-md-3 my-1"},Z={key:0,class:"text-success d-block fs-6"},J={class:"col-md-3 my-1"},K={class:"col-md my-1"},Q={class:"input-group input-group-sm"},X=["onUpdate:modelValue","onChange","disabled"],tt=["value"],et={key:0,class:"fw-bold col-md-3 my-1"},ot={key:1,class:"fw-bold col-md-3 my-1"},st={class:"fs-6 text-decoration-line-through"},lt={class:"col-md my-1"},it=["onClick","disabled"],nt={key:0,class:"fas fa-spinner fa-pulse"},ct={class:"row py-3"},at=t("li",{class:"col-lg-7"},null,-1),rt={class:"col-lg-5"},dt={class:"input-group"},ht={class:"row"},ut=t("li",{class:"col-lg-8 py-2 d-none d-md-flex"},null,-1),pt=t("li",{class:"col-lg-2 col-6 py-2 bg-text-dark text-white fw-bolder fs-4 d-flex align-items-center justify-content-center"}," 總計 ",-1),_t={key:0,class:"col-lg-2 py-2 col-6 text-end fs-4 fw-bolder text-black bg-white"},ft={key:1,class:"col-lg-2 py-2 col-6 text-end fs-4 fw-bolder text-black bg-white"},bt={class:"text-danger fs-3"},gt={class:"fs-5 text-decoration-line-through"},mt={class:"d-flex justify-content-between align-items-center"},xt=t("i",{class:"bi bi-arrow-left"},null,-1),yt=t("i",{class:"bi bi-arrow-right"},null,-1);function wt(o,s,r,T,c,_){const V=k("VueLoading"),f=k("router-link");return i(),l(g,null,[j,p(V,{active:c.isLoading,color:c.color,"z-index":9999},null,8,["active","color"]),t("section",A,[t("div",E,[o.cart.length===0?(i(),l("div",L,[t("div",z,[U,p(f,{to:"/products",class:"btn btn-outline-text-light py-2 px-2 fs-5 fw-bold"},{default:b(()=>[d("前往購物")]),_:1})])])):(i(),l("div",D,[q,t("div",F,[t("button",{class:"btn btn-outline-danger rounded-0",type:"button",onClick:s[0]||(s[0]=()=>_.deleteAllCart())}," 清空購物車 ")]),t("div",R,[G,o.cart?(i(!0),l(g,{key:0},C(o.cart,e=>(i(),l("ul",{class:"fs-4 row align-items-center border-bottom py-3 border-white",key:e.id},[t("li",M,[t("img",{src:e.product.imageUrl,class:"mw-100 mw-lg-200px mh-200px object-fit-cover table-image",alt:"產品圖片"},null,8,O)]),t("div",Y,[t("div",H,[t("li",W,[d(a(e.product.title)+" ",1),e.coupon?(i(),l("span",Z,"已套用優惠券")):h("",!0)]),t("li",J,"NT$ "+a(e.product.price),1),t("li",K,[t("div",Q,[v(t("select",{name:"",id:"",class:"form-control text-center","onUpdate:modelValue":u=>e.qty=u,onChange:u=>_.updateCartItem(e),disabled:e.id===c.loadingItem},[(i(),l(g,null,C(100,u=>t("option",{value:u,key:u+"1234"},a(u),9,tt)),64))],40,X),[[S,e.qty]])])]),this.total===this.final_total?(i(),l("li",et," NT$ "+a(e.total),1)):h("",!0),this.total!==this.final_total?(i(),l("li",ot,[d(" NT$ "+a(e.final_total)+" ",1),t("span",st,a(e.total),1)])):h("",!0),t("li",lt,[t("button",{type:"button",class:"btn btn-outline-text-dark btn-sm",onClick:()=>o.deleteCartItem(e),disabled:e.id===c.loadingItem},[c.loadingItem===e.id?(i(),l("i",nt)):h("",!0),d(" x ")],8,it)])])])]))),128)):h("",!0),t("ul",ct,[at,t("li",rt,[t("div",dt,[v(t("input",{type:"text",class:"form-control rounded-0 py-2",placeholder:"請輸入優惠代碼","onUpdate:modelValue":s[1]||(s[1]=e=>c.couponCode=e)},null,512),[[N,c.couponCode]]),t("button",{type:"btn",class:"btn btn-outline-zongzi rounded-0",onClick:s[2]||(s[2]=()=>_.checkCoupon())},"套用優惠碼")])])]),t("ul",ht,[ut,pt,this.total===this.final_total?(i(),l("li",_t,"NT$ "+a(o.total),1)):h("",!0),this.total!==this.final_total?(i(),l("li",ft,[d("NT$ "),t("span",bt,a(o.final_total),1),d(),t("span",gt,a(o.total),1)])):h("",!0)])]),t("div",mt,[p(f,{to:"/products",class:"text-decoration-none btn btn-outline-text-light rounded-0"},{default:b(()=>[xt,d("上一頁")]),_:1}),p(f,{to:"/checkout",class:"text-decoration-none btn btn-outline-text-light rounded-0"},{default:b(()=>[d("下一步"),yt]),_:1})])]))])])],64)}const It=B($,[["render",wt]]);export{It as default};
