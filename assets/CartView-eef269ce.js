import{_ as C,m as v,a as m,c as o,b as t,d as h,w as _,F as p,n as f,f as x,t as n,e as I,r as V,o as l,g as i,s as S,v as P}from"./index-4adfc113.js";import{c as b}from"./cart-14d19c9f.js";import{S as y}from"./sweetalert2.all-556c9a24.js";const A="/Zongzi-Shop-Webside/assets/SignWarning-9b2bf6aa.png";const{VITE_APP_URL:w,VITE_APP_PATH:k}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"ufo060204",BASE_URL:"/Zongzi-Shop-Webside/",MODE:"production",DEV:!1,PROD:!0},T={data(){return{products:[],productId:"",loadingItem:"",form:{user:{name:"",mail:"",tel:"",address:""},message:""}}},computed:{...v(b,["cart","total","final_total"])},methods:{...m(b,["getCarts"]),updateCartItem(e){const d={product_id:e.product.id,qty:e.qty};this.loadingItem=e.id,this.$http.put(`${w}/v2/api/${k}/cart/${e.id}`,{data:d}).then(r=>{this.getCarts(),this.loadingItem="",y.fire({icon:"success",title:"已更新數量",showConfirmButton:!1,timer:1500})}).catch(r=>{alert(r.data.message)})},...m(b,["deleteCartItem"]),deleteAllCart(){this.$http.delete(`${w}/v2/api/${k}/carts`).then(e=>{this.getCarts(),y.fire({icon:"success",title:"刪除全部品項成功",showConfirmButton:!1,timer:1500})}).catch(e=>{alert(e.data.message)})}},mounted(){this.getCarts()}},$=t("section",{class:"landing-img landing-header"},null,-1),E={class:"bg-bg"},N={class:"container-lg"},U={class:"py-8"},B={key:0,class:"row d-flex align-items-center justify-content-center"},D={class:"col-6 d-flex align-items-center justify-content-center flex-column py-6 border border-text-light bg-bg"},j=t("h1",{class:"fs-2"},"購物車",-1),q=t("img",{class:"my-6 img-fluid",style:{height:"150px"},src:A,alt:"SignWarning"},null,-1),L=t("h2",{class:"fs-4"},"您的購物車中沒有商品",-1),R={key:1},W=I('<ul class="list-unstyled d-md-flex justify-content-center"><li class="bg-white border border-boderlight py-3 px-7">確認商品</li><li class="border border-boderlight py-3 px-7">填寫資料</li><li class="border border-boderlight py-3 px-7">確認付款</li><li class="border border-boderlight py-3 px-7">完成付款</li></ul>',1),z={class:"text-end"},F={class:"table-responsive"},H={class:"table align-middle table-bordered border-white text-center"},M=t("thead",null,[t("tr",{class:"fs-5"},[t("th",{class:"bg-text-dark text-white"},"圖片"),t("th",{class:"bg-text-dark text-white"},"品名"),t("th",{class:"bg-text-dark text-white"},"單價"),t("th",{class:"bg-text-dark text-white"},"數量"),t("th",{class:"bg-text-dark text-white"},"小計"),t("th",{class:"bg-text-dark text-white"})])],-1),O=["src"],Z={class:"input-group input-group-sm"},G=["onUpdate:modelValue","onChange","disabled"],J=["value"],K={class:"fw-bold"},Q=["onClick","disabled"],X={key:0,class:"fas fa-spinner fa-pulse"},Y=t("td",{colspan:"3"},null,-1),tt=t("td",{class:"bg-text-dark text-white fw-bolder fs-4"},"總計",-1),et={colspan:"2",class:"text-end fs-4 fw-bolder text-black bg-white"},st={class:"d-md-flex justify-content-md-between align-items-md-center"};function ot(e,d,r,lt,c,g){const u=V("router-link");return l(),o(p,null,[$,t("section",E,[t("div",N,[t("main",U,[e.cart.length===0?(l(),o("div",B,[t("div",D,[j,q,L,h(u,{to:"/products",class:"btn btn-primary d-inline-block text-white py-3 px-7 fs-5 fw-bold text-decoration-none"},{default:_(()=>[i("前往購物")]),_:1})])])):(l(),o("div",R,[W,t("div",z,[t("button",{class:"btn btn-outline-danger",type:"button",onClick:d[0]||(d[0]=()=>g.deleteAllCart())}," 清空購物車 ")]),t("div",F,[t("table",H,[M,t("tbody",null,[e.cart?(l(!0),o(p,{key:0},f(e.cart,s=>(l(),o("tr",{class:"fs-4",key:s.id},[t("td",null,[t("img",{src:s.product.imageUrl,class:"table-image",alt:"imageUrl"},null,8,O)]),t("td",null,n(s.product.title),1),t("td",null,"NT$ "+n(s.product.price),1),t("td",null,[t("div",Z,[S(t("select",{name:"",id:"",class:"form-control","onUpdate:modelValue":a=>s.qty=a,onChange:a=>g.updateCartItem(s),disabled:s.id===c.loadingItem},[(l(),o(p,null,f(20,a=>t("option",{value:a,key:a+"1234"},n(a),9,J)),64))],40,G),[[P,s.qty]])])]),t("td",K," NT$ "+n(s.total),1),t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:()=>e.deleteCartItem(s),disabled:s.id===c.loadingItem},[c.loadingItem===s.id?(l(),o("i",X)):x("",!0),i(" x ")],8,Q)])]))),128)):x("",!0)]),t("tfoot",null,[t("tr",null,[Y,tt,t("td",et,"NT$ "+n(e.total),1)])])])]),t("div",st,[h(u,{to:"/products",class:"text-decoration-none btn btn-outline-text-light"},{default:_(()=>[i("上一頁")]),_:1}),h(u,{to:"/checkout",class:"text-decoration-none btn btn-outline-text-light"},{default:_(()=>[i("下一步")]),_:1})])]))])])])],64)}const it=C(T,[["render",ot]]);export{it as default};
