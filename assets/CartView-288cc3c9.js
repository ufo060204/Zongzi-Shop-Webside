import{b as $,m as I,e as T}from"./index-d352f9dd.js";import{c as b}from"./cart-c2c28b0a.js";import{S as u}from"./sweetalert2.all-6567ce3e.js";import{l as P,w as A,k as B}from"./runtime-dom.esm-bundler-8357395d.js";import{_ as N,ac as l,z as h,ad as t,bi as f,M as g,aV as y,ab as c,bk as x,b5 as i,ah as r,ag as v,k as w,l as n}from"./_plugin-vue_export-helper-ddde7e51.js";import"./vue-router-0808fa9d.js";import"./_commonjsHelpers-042e6b4d.js";const{VITE_APP_URL:k,VITE_APP_PATH:C}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"ufo060204",BASE_URL:"/Zongzi-Shop-Webside/",MODE:"production",DEV:!1,PROD:!0},S={data(){return{products:[],productId:"",loadingItem:"",isLoading:!1,color:"#FF700C",form:{user:{name:"",mail:"",tel:"",address:""},message:""}}},methods:{...$(b,["getCarts","checkCoupon","deleteCartItem"]),updateCartItem(o){const s={product_id:o.product.id,qty:o.qty};this.loadingItem=o.id,this.$http.put(`${k}/v2/api/${C}/cart/${o.id}`,{data:s}).then(p=>{this.getCarts(),this.loadingItem="",u.fire({icon:"success",title:"已更新數量",showConfirmButton:!1,timer:1500})}).catch(p=>{u.fire(p.data.message)})},deleteAllCart(){u.fire({title:"刪除確認？",text:"確定要清除購物車的所有商品嗎？",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"是的",cancelButtonText:"取消"}).then(o=>{o.isConfirmed&&this.$http.delete(`${k}/v2/api/${C}/carts`).then(s=>{this.getCarts(),u.fire("刪除成功","購物車的商品已清空","success")}).catch(s=>{u.fire(s.data.message)})})}},computed:{...I(b,["cart","total","final_total"]),...T(b,["couponCode"])},mounted(){this.getCarts()}},j=t("section",{class:"landing-img landing-header"},null,-1),E={class:"bg-bg py-7 py-lg-8 h-100"},L={class:"container h-100"},U={key:0,class:"row h-100"},z={class:"col-md-6 offset-md-3 text-center my-auto"},D=t("div",{style:{"background-color":"#F99"},class:"d-flex justify-content-center align-items-center text-white py-2 mb-3"},[t("span",{class:"material-symbols-outlined me-3"}," warning "),t("p",{class:"fs-5"},"您的購物車中沒有商品")],-1),q={key:1},F=v('<ul class="d-md-flex justify-content-center text-center"><li class="bg-white border border-boderlight py-3 px-7">確認商品</li><li class="d-flex align-items-center justify-content-center px-1"><i class="bi bi-chevron-right fs-4 text-text-light shopping-process-icon"></i></li><li class="border border-boderlight py-3 px-7">填寫資料</li><li class="d-flex align-items-center justify-content-center px-1"><i class="bi bi-chevron-right fs-4 text-text-light shopping-process-icon"></i></li><li class="border border-boderlight py-3 px-7">確認付款</li><li class="d-flex align-items-center justify-content-center px-1"><i class="bi bi-chevron-right fs-4 text-text-light shopping-process-icon"></i></li><li class="border border-boderlight py-3 px-7">完成付款</li></ul>',1),M={class:"text-end my-3"},R={class:"text-center container-lg border border-white border-2 mb-3"},H=v('<ul class="bg-text-dark row d-none d-md-flex"><li class="fs-5 fw-bold text-white py-2 col-4 border-end border-white">圖片</li><li class="fs-5 fw-bold text-white py-2 col-2 border-end border-white">品名</li><li class="fs-5 fw-bold text-white py-2 col-2 border-end border-white">單價</li><li class="fs-5 fw-bold text-white py-2 col-1 border-end border-white">數量</li><li class="fs-5 fw-bold text-white py-2 col-2 border-end border-white">小計</li><li class="fs-5 fw-bold text-white py-2 col-1">刪除</li></ul>',1),K={class:"col-md-4 col-6"},O=["src"],W={class:"col-md-8 col-6"},Z={class:"row align-items-center text-start text-md-center"},G={class:"col-md-3 my-1"},J={key:0,class:"text-success d-block fs-6"},Q={class:"col-md-3 my-1 d-none d-md-block"},X={class:"col-md my-1"},Y={class:"input-group input-group-sm bg"},tt=t("span",{class:"input-group-text bg-text-light text-white d-inline d-md-none"},"數量",-1),et=["onUpdate:modelValue","onChange","disabled"],ot=["value"],st={key:0,class:"fw-bold col-md-3 my-1"},lt={key:1,class:"fw-bold col-md-3 my-1"},nt={class:"fs-6 text-decoration-line-through"},it={class:"col-md my-1 d-flex justify-content-end align-items-center d-md-block"},ct=["onClick","disabled"],rt={key:0,class:"fas fa-spinner fa-pulse"},at=t("span",{class:"text-decoration-underline d-block d-md-none"},"刪除",-1),dt=t("span",{class:"material-symbols-outlined lh-1 d-none d-md-block"}," close ",-1),ut={class:"row py-3"},ht=t("li",{class:"col-lg-7"},null,-1),pt={class:"col-lg-5"},_t={class:"input-group"},bt={class:"row"},ft=t("li",{class:"col-lg-8 py-2 d-none d-md-flex"},null,-1),gt=t("li",{class:"col-lg-2 col-6 py-2 bg-text-dark text-white fw-bolder fs-4 d-flex align-items-center justify-content-center"}," 總計 ",-1),mt={key:0,class:"col-lg-2 py-2 col-6 text-end fs-4 fw-bolder text-black bg-white"},yt={key:1,class:"col-lg-2 py-2 col-6 text-end fs-4 fw-bolder text-black bg-white"},xt={class:"text-danger fs-4"},wt={class:"fs-5 text-decoration-line-through"},kt={class:"d-flex justify-content-between align-items-center"},Ct=t("i",{class:"bi bi-arrow-left"},null,-1),vt=t("i",{class:"bi bi-arrow-right"},null,-1);function Vt(o,s,p,$t,d,m){const V=w("VueLoading"),_=w("router-link");return n(),l(g,null,[j,h(V,{active:d.isLoading,color:d.color,"z-index":9999},null,8,["active","color"]),t("section",E,[t("div",L,[o.cart.length===0?(n(),l("div",U,[t("div",z,[D,h(_,{to:"/products",class:"btn btn-outline-text-light py-2 px-2 fs-5 fw-bold"},{default:f(()=>[r("前往購物")]),_:1})])])):(n(),l("div",q,[F,t("div",M,[t("button",{class:"btn btn-outline-danger rounded-0",type:"button",onClick:s[0]||(s[0]=()=>m.deleteAllCart())}," 清空購物車 ")]),t("div",R,[H,o.cart?(n(!0),l(g,{key:0},y(o.cart,e=>(n(),l("ul",{class:"fs-4 row align-items-center border-bottom py-3 border-white",key:e.id},[t("li",K,[t("img",{src:e.product.imageUrl,class:"mw-100 mw-lg-200px mh-150px",alt:"產品圖片"},null,8,O)]),t("div",W,[t("ul",Z,[t("li",G,[r(i(e.product.title)+" ",1),e.coupon?(n(),l("span",J,"已套用優惠券")):c("",!0)]),t("li",Q,[t("span",null,"NT$ "+i(e.product.price),1)]),t("li",X,[t("div",Y,[tt,x(t("select",{name:"",id:"",class:"form-control text-center","onUpdate:modelValue":a=>e.qty=a,onChange:a=>m.updateCartItem(e),disabled:e.id===d.loadingItem},[(n(),l(g,null,y(100,a=>t("option",{class:"text-center",value:a,key:a+"1234"},i(a),9,ot)),64))],40,et),[[B,e.qty]])])]),e.total===e.final_total?(n(),l("li",st," NT$ "+i(o.$filter.currency(e.total)),1)):c("",!0),e.total!==e.final_total?(n(),l("li",lt,[r(" NT$ "+i(o.$filter.currency(e.final_total))+" ",1),t("span",nt,i(o.$filter.currency(e.total)),1)])):c("",!0),t("li",it,[t("button",{type:"button",class:"btn btn-sm",onClick:()=>o.deleteCartItem(e),disabled:e.id===d.loadingItem},[d.loadingItem===e.id?(n(),l("i",rt)):c("",!0),at,dt],8,ct)])])])]))),128)):c("",!0),t("ul",ut,[ht,t("li",pt,[t("div",_t,[x(t("input",{type:"text",class:"form-control rounded-0 py-2",placeholder:"請輸入優惠代碼","onUpdate:modelValue":s[1]||(s[1]=e=>o.couponCode=e),onKeyup:s[2]||(s[2]=A(e=>o.checkCoupon(),["enter"]))},null,544),[[P,o.couponCode]]),t("button",{type:"btn",class:"btn btn-outline-zongzi rounded-0",onClick:s[3]||(s[3]=()=>o.checkCoupon())},"套用優惠碼")])])]),t("ul",bt,[ft,gt,this.total===this.final_total?(n(),l("li",mt,"NT$ "+i(o.$filter.currency(this.total)),1)):c("",!0),this.total!==this.final_total?(n(),l("li",yt,[r("NT$ "),t("span",xt,i(o.$filter.currency(this.final_total)),1),r(),t("span",wt,i(o.$filter.currency(this.total)),1)])):c("",!0)])]),t("div",kt,[h(_,{to:"/products",class:"text-decoration-none btn btn-outline-text-light rounded-0"},{default:f(()=>[Ct,r("上一頁")]),_:1}),h(_,{to:"/checkout",class:"text-decoration-none btn btn-outline-text-light rounded-0"},{default:f(()=>[r("下一步"),vt]),_:1})])]))])])],64)}const jt=N(S,[["render",Vt]]);export{jt as default};
